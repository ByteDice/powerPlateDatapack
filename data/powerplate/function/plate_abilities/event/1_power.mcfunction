execute as @a[scores = {usedAbility = 1, wearingPower = 1}] run scoreboard players set @s powerHpLossDuration 2400

execute at @a[scores = {usedAbility = 1, wearingPower = 1}] run particle minecraft:flame ~ ~1 ~ 0.125 0.125 0.125 0.2 100

execute as @a[scores = {powerHpLossDuration = 1..}] run scoreboard players remove @s powerHpLossDuration 1
execute as @a[scores = {wearingPower = 0, powerHpLossDuration = 0..}] run scoreboard players reset @s powerHpLossDuration


execute as @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 0}] run item replace entity @s armor.chest with minecraft:leather_chestplate[minecraft:attribute_modifiers = {modifiers: [{type: "generic.armor", amount: 8, slot: chest, id: plate_generic_armor, operation: add_value}, {type: "generic.armor_toughness", amount: 3, slot: chest, id: plate_generic_armor_toughness, operation: add_value}, {amount: -2, operation: "add_value", slot: "chest", type: "generic.max_health", id: "plate_strenght_max_health"}]}, minecraft:unbreakable = {}, minecraft:custom_name = '[{"text": "Power Chestplate", "color": "dark_red", "bold": true}]', minecraft:custom_data = {power: 1b, powerPlate: 1b, hpLoss: 1b}, minecraft:dyed_color = {rgb: 11141120}]

execute as @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 1}] run item replace entity @s armor.chest with minecraft:leather_chestplate[minecraft:attribute_modifiers = {modifiers: [{type: "generic.armor", amount: 8, slot: chest, id: plate_generic_armor, operation: add_value}, {type: "generic.armor_toughness", amount: 3, slot: chest, id: plate_generic_armor_toughness, operation: add_value}, {amount: -4, operation: "add_value", slot: "chest", type: "generic.max_health", id: "plate_strenght_max_health"}]}, minecraft:unbreakable = {}, minecraft:custom_name = '[{"text": "Power Chestplate", "color": "dark_red", "bold": true}]', minecraft:custom_data = {power: 1b, powerPlate: 1b, hpLoss: 2b}, minecraft:dyed_color = {rgb: 11141120}]

execute as @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 2}] run item replace entity @s armor.chest with minecraft:leather_chestplate[minecraft:attribute_modifiers = {modifiers: [{type: "generic.armor", amount: 8, slot: chest, id: plate_generic_armor, operation: add_value}, {type: "generic.armor_toughness", amount: 3, slot: chest, id: plate_generic_armor_toughness, operation: add_value}, {amount: -6, operation: "add_value", slot: "chest", type: "generic.max_health", id: "plate_strenght_max_health"}]}, minecraft:unbreakable = {}, minecraft:custom_name = '[{"text": "Power Chestplate", "color": "dark_red", "bold": true}]', minecraft:custom_data = {power: 1b, powerPlate: 1b, hpLoss: 3b}, minecraft:dyed_color = {rgb: 11141120}]

execute as @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 3}] run item replace entity @s armor.chest with minecraft:leather_chestplate[minecraft:attribute_modifiers = {modifiers: [{type: "generic.armor", amount: 8, slot: chest, id: plate_generic_armor, operation: add_value}, {type: "generic.armor_toughness", amount: 3, slot: chest, id: plate_generic_armor_toughness, operation: add_value}, {amount: -8, operation: "add_value", slot: "chest", type: "generic.max_health", id: "plate_strenght_max_health"}]}, minecraft:unbreakable = {}, minecraft:custom_name = '[{"text": "Power Chestplate", "color": "dark_red", "bold": true}]', minecraft:custom_data = {power: 1b, powerPlate: 1b, hpLoss: 4b}, minecraft:dyed_color = {rgb: 11141120}]

execute as @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 4}] run item replace entity @s armor.chest with minecraft:leather_chestplate[minecraft:attribute_modifiers = {modifiers: [{type: "generic.armor", amount: 8, slot: chest, id: plate_generic_armor, operation: add_value}, {type: "generic.armor_toughness", amount: 3, slot: chest, id: plate_generic_armor_toughness, operation: add_value}, {amount: -10, operation: "add_value", slot: "chest", type: "generic.max_health", id: "plate_strenght_max_health"}]}, minecraft:unbreakable = {}, minecraft:custom_name = '[{"text": "Power Chestplate", "color": "dark_red", "bold": true}]', minecraft:custom_data = {power: 1b, powerPlate: 1b, hpLoss: 5b}, minecraft:dyed_color = {rgb: 11141120}]

execute as @a[scores = {wearingPower = 1, powerHpLoss = 1..}] unless entity @s[scores = {powerHpLossDuration = 1..}] run item replace entity @s armor.chest with minecraft:leather_chestplate[minecraft:attribute_modifiers = {modifiers: [{type: "generic.armor", amount: 8, slot: chest, id: plate_generic_armor, operation: add_value}, {type: "generic.armor_toughness", amount: 3, slot: chest, id: plate_generic_armor_toughness, operation: add_value}]}, minecraft:unbreakable = {}, minecraft:custom_name = '[{"text": "Power Chestplate", "color": "dark_red", "bold": true}]', minecraft:custom_data = {power: 1b, powerPlate: 1b, hpLoss: 0b}, minecraft:dyed_color = {rgb: 11141120}]

execute at @a[scores = {usedAbility = 1, wearingPower = 1}] run playsound minecraft:entity.ender_dragon.growl player @a ~ ~ ~
execute at @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 4}] run playsound minecraft:entity.wither.spawn player @a ~ ~ ~
execute at @a[scores = {usedAbility = 1, wearingPower = 1, powerHpLoss = 5}] run playsound minecraft:entity.ender_dragon.hurt player @a ~ ~ ~
scoreboard players set @a[scores = {usedAbility = 1, wearingPower = 1}] powerPlateCooldown 20